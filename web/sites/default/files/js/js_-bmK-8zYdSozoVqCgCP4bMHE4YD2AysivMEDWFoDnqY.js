/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function(Drupal,once){'use strict';function positionSubmenu(link,submenu){const rect=link.getBoundingClientRect();const viewportWidth=window.innerWidth;const spaceRight=viewportWidth-rect.right;const spaceLeft=rect.left;submenu.classList.remove('main-nav__submenu-nested--left','main-nav__submenu-nested--right');if(spaceLeft>spaceRight)submenu.classList.add('main-nav__submenu-nested--left');else submenu.classList.add('main-nav__submenu-nested--right');}function initMainMenu(){const mainMenus=once('main-menu','.region-header .main-nav');mainMenus.forEach(function(menu){const menuItems=menu.querySelectorAll('.main-nav__item--has-submenu');menuItems.forEach(function(menuItem){const link=menuItem.querySelector('.main-nav__link');const submenu=menuItem.querySelector('.main-nav__submenu, .main-nav__submenu-nested');if(!link||!submenu)return;const nestedLevel=submenu.classList.contains('main-nav__submenu-nested');if(nestedLevel)positionSubmenu(link,submenu);menuItem.addEventListener('mouseenter',function(){link.setAttribute('aria-expanded','true');});menuItem.addEventListener('mouseleave',function(){link.setAttribute('aria-expanded','false');});submenu.addEventListener('mouseleave',function(){link.setAttribute('aria-expanded','false');});});window.addEventListener('resize',function(){const nestedSubmenus=menu.querySelectorAll('.main-nav__submenu-nested');nestedSubmenus.forEach(function(submenu){const menuItem=submenu.closest('.main-nav__item');const link=menuItem?menuItem.querySelector('.main-nav__link'):null;if(link&&submenu)positionSubmenu(link,submenu);});});});}Drupal.behaviors.mainMenu={attach:function(context){initMainMenu();}};})(Drupal,once);;
