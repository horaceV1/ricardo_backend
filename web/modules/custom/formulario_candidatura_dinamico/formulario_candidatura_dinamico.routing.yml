entity.dynamic_form.canonical:
  path: '/admin/content/formularios-dinamicos/{dynamic_form}'
  defaults:
    _entity_view: 'dynamic_form.full'
    _title_callback: '\Drupal\formulario_candidatura_dinamico\Controller\DynamicFormController::title'
  requirements:
    _permission: 'administer site configuration'

entity.dynamic_form.collection:
  path: '/admin/content/formularios-dinamicos'
  defaults:
    _entity_list: 'dynamic_form'
    _title: 'Formulários Dinâmicos'
  requirements:
    _permission: 'administer site configuration'

entity.dynamic_form.add_form:
  path: '/admin/content/formularios-dinamicos/add'
  defaults:
    _entity_form: 'dynamic_form.add'
    _title: 'Adicionar formulário dinâmico'
  requirements:
    _permission: 'administer site configuration'

entity.dynamic_form.edit_form:
  path: '/admin/content/formularios-dinamicos/{dynamic_form}/edit'
  defaults:
    _entity_form: 'dynamic_form.edit'
    _title: 'Editar formulário dinâmico'
  requirements:
    _permission: 'administer site configuration'

entity.dynamic_form.delete_form:
  path: '/admin/content/formularios-dinamicos/{dynamic_form}/delete'
  defaults:
    _entity_form: 'dynamic_form.delete'
    _title: 'Apagar formulário dinâmico'
  requirements:
    _permission: 'administer site configuration'

# Form submission routes
formulario_candidatura_dinamico.documentos_estado_form:
  path: '/admin/content/formularios-dinamicos/documentos-estado'
  defaults:
    _form: '\Drupal\formulario_candidatura_dinamico\Form\DocumentosEstadoForm'
    _title: 'Estados dos Documentos'
  requirements:
    _permission: 'administer site configuration'
    
dynamic_form.submit:
  path: '/formulario/{form_id}'
  defaults:
    _form: '\Drupal\formulario_candidatura_dinamico\Form\DynamicFormSubmissionForm'
    _title_callback: '\Drupal\formulario_candidatura_dinamico\Controller\DynamicFormSubmissionController::formTitle'
  requirements:
    _user_is_logged_in: 'TRUE'

dynamic_form.submissions:
  path: '/admin/content/formularios-dinamicos/{dynamic_form}/submissions'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\DynamicFormSubmissionController::listSubmissions'
    _title_callback: '\Drupal\formulario_candidatura_dinamico\Controller\DynamicFormSubmissionController::submissionsTitle'
  requirements:
    _permission: 'administer site configuration'

entity.dynamic_form_submission.canonical:
  path: '/admin/content/formularios-dinamicos/submission/{dynamic_form_submission}'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\DynamicFormSubmissionController::viewSubmission'
    _title_callback: '\Drupal\formulario_candidatura_dinamico\Controller\DynamicFormSubmissionController::submissionTitle'
  requirements:
    _permission: 'administer site configuration'

entity.dynamic_form_submission.delete_form:
  path: '/admin/content/formularios-dinamicos/submission/{dynamic_form_submission}/delete'
  defaults:
    _entity_form: 'dynamic_form_submission.delete'
    _title: 'Eliminar submissão'
  requirements:
    _permission: 'administer site configuration'

# API routes for frontend
formulario_candidatura_dinamico.dynamic_form_api:
  path: '/api/dynamic-form/{form_id}'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\DynamicFormApiController::getForm'
  requirements:
    _permission: 'access content'
  methods: [GET]
  options:
    parameters:
      form_id:
        type: string

formulario_candidatura_dinamico.dynamic_form_submit_api:
  path: '/api/dynamic-form/submit'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\DynamicFormApiController::submitForm'
  requirements:
    _access: 'TRUE'
  methods: [POST, OPTIONS]
  options:
    no_cache: TRUE

# Test endpoint
formulario_candidatura_dinamico.test_api:
  path: '/api/test'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\DynamicFormApiController::testEndpoint'
  requirements:
    _access: 'TRUE'
  methods: [GET, POST]
  options:
    no_cache: TRUE

# Article layout API route
formulario_candidatura_dinamico.article_layout_api:
  path: '/api/article-layout/{node}'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\DynamicFormApiController::getArticleLayout'
  requirements:
    _permission: 'access content'
  methods: [GET]
  options:
    parameters:
      node:
        type: entity:node

# Commerce Cart API routes
formulario_candidatura_dinamico.cart_get:
  path: '/api/cart'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\CommerceCartApiController::getCart'
  requirements:
    _access: 'TRUE'
  methods: [GET, OPTIONS]

formulario_candidatura_dinamico.cart_add:
  path: '/api/cart/add'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\CommerceCartApiController::addToCart'
  requirements:
    _access: 'TRUE'
  methods: [POST, OPTIONS]

formulario_candidatura_dinamico.cart_remove:
  path: '/api/cart/remove'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\CommerceCartApiController::removeFromCart'
  requirements:
    _access: 'TRUE'
  methods: [POST, OPTIONS]

formulario_candidatura_dinamico.cart_update:
  path: '/api/cart/update'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\CommerceCartApiController::updateCartItem'
  requirements:
    _access: 'TRUE'
  methods: [POST, OPTIONS]

# PayPal Checkout API routes
formulario_candidatura_dinamico.paypal_create_order:
  path: '/api/checkout/paypal/create-order'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\PayPalCheckoutApiController::createOrder'
  requirements:
    _user_is_logged_in: 'TRUE'
  methods: [POST]

formulario_candidatura_dinamico.paypal_capture_order:
  path: '/api/checkout/paypal/capture-order'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\PayPalCheckoutApiController::captureOrder'
  requirements:
    _user_is_logged_in: 'TRUE'
  methods: [POST]

# Order API routes
formulario_candidatura_dinamico.order_get:
  path: '/api/order/{order_id}'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\CommerceCartApiController::getOrder'
  requirements:
    _user_is_logged_in: 'TRUE'
  methods: [GET]

formulario_candidatura_dinamico.user_submissions_api:
  path: '/api/user-submissions'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\UserSubmissionsApiController::getUserSubmissions'
  requirements:
    _user_is_logged_in: 'TRUE'
  methods: [GET]

formulario_candidatura_dinamico.recent_activity_api:
  path: '/api/recent-activity'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\RecentActivityApiController::getRecentActivity'
  requirements:
    _access: 'TRUE'
  methods: [GET]

# Quick approval endpoint
formulario_candidatura_dinamico.quick_approve:
  path: '/formulario-candidatura-dinamico/submission/{submission_id}/quick-approve'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\QuickApprovalController::quickApprove'
  requirements:
    _permission: 'administer users'
    submission_id: \d+
  methods: [POST]

# User submissions tab
formulario_candidatura_dinamico.user.submissions:
  path: '/user/{user}/submissions'
  defaults:
    _controller: '\Drupal\formulario_candidatura_dinamico\Controller\UserSubmissionsController::listUserSubmissions'
    _title_callback: '\Drupal\formulario_candidatura_dinamico\Controller\UserSubmissionsController::title'
  requirements:
    _permission: 'administer users'
  options:
    parameters:
      user:
        type: entity:user
